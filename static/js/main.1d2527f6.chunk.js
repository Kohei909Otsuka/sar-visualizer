(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{129:function(e,t,n){e.exports=n(268)},134:function(e,t,n){},268:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(34),c=n.n(o),i=(n(134),n(39)),u=n(13),l=n(14),s="#586e75",m="#93a1a1",d="#b58900",f="#cb4b16",p="#dc322f",h="#d33682",v="#6c71c4",b="#268bd2",g="#2aa198",y="#859900";function E(){var e=Object(u.a)(["\n  background: ","\n  color: ",";\n  font-size: 1.5em;\n  padding: 0.25em 1em;\n  border-radius: 4px;\n  border: transparent;\n"]);return E=function(){return e},e}function M(){var e=Object(u.a)(["\n  width: 400px;\n  display: flex;\n  justify-content: space-around;\n"]);return M=function(){return e},e}function j(){var e=Object(u.a)(["\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  margin-top: 5px;\n  margin-bottom: 5px;\n  height: 40px;\n"]);return j=function(){return e},e}var _=l.a.div(j()),w=l.a.div(M()),x=l.a.button(E(),function(e){return e.active?g:"white"},function(e){return e.active?"white":m}),O=function(e){var t=e.mode,n=e.onChangeMode;return r.a.createElement(_,null,r.a.createElement(w,null,r.a.createElement(x,{active:"upload"===t,onClick:function(){return n("upload")}},"Upload"),r.a.createElement(x,{active:"history"===t,onClick:function(){return n("history")}},"History")))},k=n(128),S=function(e){return e.timestamp.date+" "+e.timestamp.time},C=function(e){var t=e["cpu-load-all"][0];return{timestamp:S(e),user:t.usr,nice:t.nice,system:t.sys,iowait:t.iowait,steal:t.steal,idle:t.idle}},D=function(e){var t=e.memory;return{timestamp:S(e),free:Math.floor(z(t.memfree)),used:Math.floor(z(t.memused)),used_percent:t["memused-percent"],buffers:Math.floor(z(t.buffers)),cached:Math.floor(z(t.cached))}},z=function(e){return e/1e3},A=function(e,t){var n=JSON.parse(e).sysstat.hosts[0],a={id:t(),nodename:n.nodename,sysname:n.sysname,release:n.release,machine:n.machine,number_of_cpus:n["number-of-cpus"],file_date:n["file-date"]},r={cpu:[],memory:[]};return n.statistics.forEach(function(e){r.cpu.push(C(e)),r.memory.push(D(e))}),Object.assign({},a,{statistics:r})};function T(){var e=Object(u.a)(["\n  height: 70vh;\n  border-width: 2px;\n  border-radius: 5px;\n  border-color: ",";\n  border-style: dashed;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: ","\n  font-size: 2.0em;\n"]);return T=function(){return e},e}var B=l.a.div(T(),m,m),J=function(){return(new Date).getTime().toString(16)+Math.floor(1e4*Math.random()).toString(16)},K=function(e){var t=e.setMode,n=e.setStat,a=e.saveStat;return r.a.createElement("div",null,r.a.createElement(k.a,{onDropAccepted:function(e){console.log("success file",e);var r=new FileReader;r.onload=function(){var o=r.result,c=A(o,J);c.file=e[0].name,console.log("loaded file content",c),console.log("loaded file object",e[0]),n(c),t("visualize"),a(c)},r.readAsText(e[0])},onDropRejected:function(e){console.log("fail file",e)}},function(e){var t=e.getRootProps,n=e.getInputProps;return r.a.createElement(B,t(),r.a.createElement("input",n()),"Drag and drop here")}))},L=n(114),P=n(115);function R(){var e=Object(u.a)(["\n padding: 20px;\n"]);return R=function(){return e},e}function F(){var e=Object(u.a)(["\n padding: 20px;\n"]);return F=function(){return e},e}function H(){var e=Object(u.a)(["\n  :hover {\n    background: "," !important;\n    color: white;\n  }\n"]);return H=function(){return e},e}function I(){var e=Object(u.a)(["\n  border: solid 1px;\n"]);return I=function(){return e},e}function U(){var e=Object(u.a)(["\n  color: ",";\n"]);return U=function(){return e},e}function W(){var e=Object(u.a)(["\n  color: ",";\n"]);return W=function(){return e},e}function N(){var e=Object(u.a)(["\n  font-size: 1.2em;\n  text-align: left;\n  border-collapse: collapse;\n  margin-left: auto;\n  margin-right: auto;\n"]);return N=function(){return e},e}var Y=l.a.table(N()),$=l.a.thead(W(),s),q=l.a.tbody(U(),m),G=l.a.tr(I()),Q=Object(l.a)(G)(H(),g),V=l.a.th(F()),X=l.a.td(R()),Z=function(e){var t=e.stats,n=e.onClickStat,a=e.onDeleteStat;return r.a.createElement(Y,null,r.a.createElement($,null,r.a.createElement(G,null,r.a.createElement(V,null,"time"),r.a.createElement(V,null,"file"),r.a.createElement(V,null,"os"),r.a.createElement(V,null,"machine"),r.a.createElement(V,null,"cpus"),r.a.createElement(V,null))),r.a.createElement(q,null,t.map(function(e){return function(e){var t=function(){return n(e.id)};return r.a.createElement(Q,{key:e.id},r.a.createElement(X,{onClick:t},e.file_date),r.a.createElement(X,{onClick:t},e.file),r.a.createElement(X,{onClick:t},e.sysname),r.a.createElement(X,{onClick:t},e.machine),r.a.createElement(X,{onClick:t},e.number_of_cpus),r.a.createElement(X,null,r.a.createElement(L.a,{icon:P.a,onClick:function(){return a(e.id)}})))}(e)})))},ee=n(272),te=n(266),ne=n(267),ae=n(269),re=n(110),oe=n(270);function ce(){var e=Object(u.a)(["\n  color: ",";\n  font-size: 1.2em;\n"]);return ce=function(){return e},e}var ie=[d,f,p,h,v,b,g,y],ue=l.a.p(ce(),m),le=function(e){var t=e.data,n=e.kinds,o=e.title,c=Object(a.useState)(n),u=Object(i.a)(c,2),l=u[0],s=u[1];return r.a.createElement("div",null,r.a.createElement(ue,null,o),r.a.createElement(ee.a,{width:1200,height:300,data:t},r.a.createElement(te.a,{dataKey:"timestamp"}),r.a.createElement(ne.a,null),r.a.createElement(ae.a,null),r.a.createElement(re.a,{onClick:function(e){return t=e.dataKey,void(l.includes(t)?s(l.filter(function(e){return e!==t})):s(l.concat([t])));var t}}),n.map(function(e,t){var n=l.includes(e)?ie[(t+1)%ie.length]:"transparent";return r.a.createElement(oe.a,{key:e,type:"monotone",dataKey:e,stroke:n})})))},se=n(126),me=function(e){var t=e.getFullYear(),n=e.getMonth(),a=e.getDate(),r=e.getHours(),o=e.getMinutes(),c=e.getSeconds();return"".concat(t,"-").concat(de(n),"-").concat(de(a)," ").concat(de(r),":").concat(de(o),":").concat(de(c))},de=function(e){return e<10?"0".concat(e):"".concat(e)},fe=new se.a("sar");fe.version(1).stores({stats:"id"});var pe=function(e,t){return Array(e).fill().map(function(e,n){var a=new Date(t.getTime()+60*(n+1)*1e3);return{timestamp:me(a),user:Math.floor(100*Math.random()),nice:Math.floor(100*Math.random()),system:Math.floor(100*Math.random()),iowait:Math.floor(100*Math.random()),steal:Math.floor(100*Math.random()),idle:Math.floor(100*Math.random())}})},he=function(e,t){return Array(e).fill().map(function(e,n){var a=new Date(t.getTime()+60*(n+1)*1e3);return{timestamp:me(a),free:Math.floor(9500*Math.random())+500,used:Math.floor(9500*Math.random())+500,used_percent:Math.floor(100*Math.random()),buffers:Math.floor(100*Math.random()),cached:Math.floor(1e3*Math.random())}})};fe.on("populate",function(){var e=new Date;fe.stats.add({id:1,nodename:"localhost",sysname:"Linux",release:"1.7.0",machine:"x86_64",number_of_cpus:1,file_date:"2019-02-09",file:"cpu_test.json",statistics:{cpu:pe(50,e),memory:he(50,e)}}),fe.stats.add({id:2,nodename:"remotehost",sysname:"Linux",release:"1.7.0",machine:"x86_64",number_of_cpus:2,file_date:"2019-02-10",file:"cpu_test2.json",statistics:{cpu:pe(50,e),memory:he(50,e)}}),fe.stats.add({id:3,nodename:"192.168.000.123",sysname:"Linux",release:"1.7.0",machine:"x86_64",number_of_cpus:2,file_date:"2019-02-11",file:"cpu_test3.json",statistics:{cpu:pe(50,e),memory:he(50,e)}})}),fe.open();var ve=fe,be=function(e){ve.table("stats").add(e).then(function(e){console.log("added to indexedDB",e)})};function ge(){var e=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return ge=function(){return e},e}function ye(){var e=Object(u.a)(["\n  margin: 30px 10px;\n"]);return ye=function(){return e},e}var Ee=l.a.div(ye()),Me=l.a.div(ge()),je=function(){var e=Object(a.useState)("upload"),t=Object(i.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)({}),u=Object(i.a)(c,2),l=u[0],s=u[1],m=Object(a.useState)([]),d=Object(i.a)(m,2),f=d[0],p=d[1];Object(a.useEffect)(function(){ve.table("stats").toArray().then(function(e){return p(e.map(function(e){return{id:e.id,nodename:e.nodename,sysname:e.sysname,release:e.release,machine:e.machine,number_of_cpus:e.number_of_cpus,file_date:e.file_date,file:e.file}}))})});var h,v=function(e){(function(e){return ve.table("stats").get(e)})(e).then(function(e){s(e),o("visualize")})},b=function(e){(function(e){return ve.table("stats").delete(e)})(e).then(function(){p(f.filter(function(t){return t.id!==e}))})};return r.a.createElement("div",null,r.a.createElement(O,{mode:n,onChangeMode:o}),("upload"===n?h=r.a.createElement(K,{setMode:o,setStat:s,saveStat:be,stats:f}):"history"===n?h=r.a.createElement(Z,{stats:f,onClickStat:v,onDeleteStat:b}):"visualize"===n&&Object.keys(l).length>0&&(h=r.a.createElement(Me,null,r.a.createElement(le,{title:"CPU",data:l.statistics.cpu,kinds:["user","nice","system","iowait","steal","idle"]}),r.a.createElement(le,{title:"Memory",data:l.statistics.memory,kinds:["free","used","used_percent","buffers","cached"]}))),r.a.createElement(Ee,null,h)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(je,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[129,2,1]]]);
//# sourceMappingURL=main.1d2527f6.chunk.js.map