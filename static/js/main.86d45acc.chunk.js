(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{129:function(e,t,n){e.exports=n(268)},134:function(e,t,n){},268:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(34),i=n.n(o),c=(n(134),n(39)),l=n(13),u=n(14),s="#586e75",d="#93a1a1",f="#b58900",m="#cb4b16",h="#dc322f",p="#d33682",v="#6c71c4",b="#268bd2",g="#2aa198",y="#859900";function E(){var e=Object(l.a)(["\n  background: ","\n  color: ",";\n  font-size: 1.5em;\n  padding: 0.25em 1em;\n  border-radius: 4px;\n  border: transparent;\n"]);return E=function(){return e},e}function w(){var e=Object(l.a)(["\n  width: 400px;\n  display: flex;\n  justify-content: space-around;\n"]);return w=function(){return e},e}function j(){var e=Object(l.a)(["\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  margin-top: 5px;\n  margin-bottom: 5px;\n  height: 40px;\n"]);return j=function(){return e},e}var M=u.a.div(j()),k=u.a.div(w()),_=u.a.button(E(),function(e){return e.active?g:"white"},function(e){return e.active?"white":d}),x=function(e){var t=e.mode,n=e.onChangeMode;return r.a.createElement(M,null,r.a.createElement(k,null,r.a.createElement(_,{active:"upload"===t,onClick:function(){return n("upload")}},"Upload"),r.a.createElement(_,{active:"history"===t,onClick:function(){return n("history")}},"History")))},O=n(128),S=function(e){return e.timestamp.date+" "+e.timestamp.time},C=function(e){var t=e["cpu-load-all"][0];return{timestamp:S(e),user:t.usr,nice:t.nice,system:t.sys,iowait:t.iowait,steal:t.steal,idle:t.idle}},D=function(e){var t=e.memory;return{timestamp:S(e),free:Math.floor(A(t.memfree)),used:Math.floor(A(t.memused)),used_percent:t["memused-percent"],buffers:Math.floor(A(t.buffers)),cached:Math.floor(A(t.cached))}},A=function(e){return e/1e3},z=function(e,t){var n=JSON.parse(e).sysstat.hosts[0],a={id:t(),nodename:n.nodename,sysname:n.sysname,release:n.release,machine:n.machine,number_of_cpus:n["number-of-cpus"],file_date:n["file-date"]},r={cpu:[],memory:[]};return n.statistics.forEach(function(e){r.cpu.push(C(e)),r.memory.push(D(e))}),Object.assign({},a,{statistics:r})};function W(){var e=Object(l.a)(["\n  height: 70vh;\n  border-width: 2px;\n  border-radius: 5px;\n  border-color: ",";\n  border-style: dashed;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: ","\n  font-size: 2.0em;\n"]);return W=function(){return e},e}var R=u.a.div(W(),d,d),T=function(){return(new Date).getTime().toString(16)+Math.floor(1e4*Math.random()).toString(16)},L=function(e){var t=e.setMode,n=e.setStat,a=e.saveStat;return r.a.createElement("div",null,r.a.createElement(O.a,{onDropAccepted:function(e){console.log("success file",e);var r=new FileReader;r.onload=function(){var o=r.result,i=z(o,T);i.file=e[0].name,console.log("loaded file content",i),console.log("loaded file object",e[0]),n(i),t("visualize"),a(i)},r.readAsText(e[0])},onDropRejected:function(e){console.log("fail file",e)}},function(e){var t=e.getRootProps,n=e.getInputProps;return r.a.createElement(R,t(),r.a.createElement("input",n()),"Drag and drop here")}))},P=n(114),U=n(115);function B(){var e=Object(l.a)(["\n padding: 20px;\n"]);return B=function(){return e},e}function J(){var e=Object(l.a)(["\n padding: 20px;\n"]);return J=function(){return e},e}function K(){var e=Object(l.a)(["\n  :hover {\n    background: "," !important;\n    color: white;\n  }\n"]);return K=function(){return e},e}function N(){var e=Object(l.a)(["\n  border: solid 1px;\n"]);return N=function(){return e},e}function F(){var e=Object(l.a)(["\n  color: ",";\n"]);return F=function(){return e},e}function H(){var e=Object(l.a)(["\n  color: ",";\n"]);return H=function(){return e},e}function I(){var e=Object(l.a)(["\n  font-size: 1.2em;\n  text-align: left;\n  border-collapse: collapse;\n  margin-left: auto;\n  margin-right: auto;\n"]);return I=function(){return e},e}var Y=u.a.table(I()),$=u.a.thead(H(),s),q=u.a.tbody(F(),d),G=u.a.tr(N()),Q=Object(u.a)(G)(K(),g),V=u.a.th(J()),X=u.a.td(B()),Z=function(e){var t=e.stats,n=e.onClickStat,a=e.onDeleteStat;return r.a.createElement(Y,null,r.a.createElement($,null,r.a.createElement(G,null,r.a.createElement(V,null,"time"),r.a.createElement(V,null,"file"),r.a.createElement(V,null,"os"),r.a.createElement(V,null,"machine"),r.a.createElement(V,null,"cpus"),r.a.createElement(V,null))),r.a.createElement(q,null,t.map(function(e){return function(e){var t=function(){return n(e.id)};return r.a.createElement(Q,{key:e.id},r.a.createElement(X,{onClick:t},e.file_date),r.a.createElement(X,{onClick:t},e.file),r.a.createElement(X,{onClick:t},e.sysname),r.a.createElement(X,{onClick:t},e.machine),r.a.createElement(X,{onClick:t},e.number_of_cpus),r.a.createElement(X,null,r.a.createElement(P.a,{icon:U.a,onClick:function(){return a(e.id)}})))}(e)})))},ee=n(272),te=n(266),ne=n(267),ae=n(269),re=n(110),oe=n(270);function ie(){var e=Object(l.a)(["\n  color: ",";\n  font-size: 1.2em;\n"]);return ie=function(){return e},e}var ce=[f,m,h,p,v,b,g,y],le=u.a.p(ie(),d),ue=function(e){var t=e.data,n=e.kinds,o=e.title,i=Object(a.useState)(n),l=Object(c.a)(i,2),u=l[0],s=l[1];return r.a.createElement("div",null,r.a.createElement(le,null,o),r.a.createElement(ee.a,{width:1200,height:300,data:t},r.a.createElement(te.a,{dataKey:"timestamp"}),r.a.createElement(ne.a,null),r.a.createElement(ae.a,null),r.a.createElement(re.a,{onClick:function(e){return t=e.dataKey,void(u.includes(t)?s(u.filter(function(e){return e!==t})):s(u.concat([t])));var t}}),n.map(function(e,t){var n=u.includes(e)?ce[(t+1)%ce.length]:"transparent";return r.a.createElement(oe.a,{key:e,type:"monotone",dataKey:e,stroke:n,dot:!1})})))},se=n(126),de=function(e){var t=e.getFullYear(),n=e.getMonth(),a=e.getDate(),r=e.getHours(),o=e.getMinutes(),i=e.getSeconds();return"".concat(t,"-").concat(fe(n),"-").concat(fe(a)," ").concat(fe(r),":").concat(fe(o),":").concat(fe(i))},fe=function(e){return e<10?"0".concat(e):"".concat(e)},me=new se.a("sar");me.version(1).stores({stats:"id"});var he=function(e,t){return Array(e).fill().map(function(e,n){var a=new Date(t.getTime()+60*(n+1)*1e3);return{timestamp:de(a),user:Math.floor(100*Math.random()),nice:Math.floor(100*Math.random()),system:Math.floor(100*Math.random()),iowait:Math.floor(100*Math.random()),steal:Math.floor(100*Math.random()),idle:Math.floor(100*Math.random())}})},pe=function(e,t){return Array(e).fill().map(function(e,n){var a=new Date(t.getTime()+60*(n+1)*1e3);return{timestamp:de(a),free:Math.floor(9500*Math.random())+500,used:Math.floor(9500*Math.random())+500,used_percent:Math.floor(100*Math.random()),buffers:Math.floor(100*Math.random()),cached:Math.floor(1e3*Math.random())}})};me.on("populate",function(){var e=new Date;me.stats.add({id:1,nodename:"localhost",sysname:"Linux",release:"1.7.0",machine:"x86_64",number_of_cpus:1,file_date:"2019-02-09",file:"cpu_test.json",statistics:{cpu:he(50,e),memory:pe(50,e)}}),me.stats.add({id:2,nodename:"remotehost",sysname:"Linux",release:"1.7.0",machine:"x86_64",number_of_cpus:2,file_date:"2019-02-10",file:"cpu_test2.json",statistics:{cpu:he(50,e),memory:pe(50,e)}}),me.stats.add({id:3,nodename:"192.168.000.123",sysname:"Linux",release:"1.7.0",machine:"x86_64",number_of_cpus:2,file_date:"2019-02-11",file:"cpu_test3.json",statistics:{cpu:he(50,e),memory:pe(50,e)}})}),me.open();var ve=me,be=function(e){ve.table("stats").add(e).then(function(e){console.log("added to indexedDB",e)})};function ge(){var e=Object(l.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return ge=function(){return e},e}function ye(){var e=Object(l.a)(["\n  margin: 30px 10px;\n"]);return ye=function(){return e},e}var Ee=u.a.div(ye()),we=u.a.div(ge()),je=function(){var e=Object(a.useState)("upload"),t=Object(c.a)(e,2),n=t[0],o=t[1],i=Object(a.useState)({}),l=Object(c.a)(i,2),u=l[0],s=l[1],d=Object(a.useState)([]),f=Object(c.a)(d,2),m=f[0],h=f[1];Object(a.useEffect)(function(){ve.table("stats").toArray().then(function(e){return h(e.map(function(e){return{id:e.id,nodename:e.nodename,sysname:e.sysname,release:e.release,machine:e.machine,number_of_cpus:e.number_of_cpus,file_date:e.file_date,file:e.file}}))})});var p,v=function(e){(function(e){return ve.table("stats").get(e)})(e).then(function(e){s(e),o("visualize")})},b=function(e){(function(e){return ve.table("stats").delete(e)})(e).then(function(){h(m.filter(function(t){return t.id!==e}))})};return r.a.createElement("div",null,r.a.createElement(x,{mode:n,onChangeMode:o}),("upload"===n?p=r.a.createElement(L,{setMode:o,setStat:s,saveStat:be,stats:m}):"history"===n?p=r.a.createElement(Z,{stats:m,onClickStat:v,onDeleteStat:b}):"visualize"===n&&Object.keys(u).length>0&&(p=r.a.createElement(we,null,r.a.createElement(ue,{title:"CPU",data:u.statistics.cpu,kinds:["user","nice","system","iowait","steal","idle"]}),r.a.createElement(ue,{title:"Memory",data:u.statistics.memory,kinds:["free","used","used_percent","buffers","cached"]}))),r.a.createElement(Ee,null,p)))},Me=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ke(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.a.render(r.a.createElement(je,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/sar-visualizer",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/sar-visualizer","/service-worker.js");Me?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ke(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):ke(t,e)})}}()}},[[129,2,1]]]);
//# sourceMappingURL=main.86d45acc.chunk.js.map